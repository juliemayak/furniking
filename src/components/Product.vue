<template>
  <div class="font-mulish h-72 sm:h-[387px] sm:w-[270px] justify-self-center">
    <div
      class="relative h-36 w-32 sm:h-72 sm:w-[269px] mb-4 bg-gray-100 cursor-pointer overflow-hidden"
      @mouseover="isHovered = true"
      @mouseleave="isHovered = false"
    >
      <Picture
        :src="src"
        className="w-full h-full object-contain select-none"
        :alt="goodName"
      />
      <ProductLabel :labelText="label" />
      <div
        :class="[
          'controls absolute bottom-2 sm:bottom-4 right-2 flex flex-col space-y-1 sm:space-y-2 translate-x-[150%] transition-all',
          isHovered ? 'translate-x-[0%]' : 'translate-x-[150%]',
        ]"
      >
        <div class="controls__icon">
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            class="fill-current"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.777 21.1556L3.53618 12.9051C2.44325 11.811 1.82919 10.3271 1.8291 8.77973C1.82901 7.23237 2.44289 5.74836 3.53569 4.65414C4.62849 3.55993 6.1107 2.94516 7.65625 2.94507C9.20179 2.94498 10.6841 3.55958 11.777 4.65366C12.8705 3.56081 14.3524 2.94702 15.8974 2.94702C17.4425 2.94702 18.9244 3.56081 20.0178 4.65366V4.65366C21.1089 5.74865 21.7217 7.2322 21.7217 8.7789C21.7217 10.3256 21.1089 11.8092 20.0178 12.9041L11.777 21.1556ZM7.6561 4.88994C6.88767 4.88991 6.13648 5.11805 5.49756 5.54548C4.85863 5.97292 4.36068 6.58046 4.06667 7.29126C3.77266 8.00206 3.6958 8.78419 3.84583 9.53873C3.99585 10.2933 4.36601 10.9863 4.90949 11.5302L11.777 18.4058L18.6445 11.5302C19.039 11.1441 19.3468 10.6783 19.5474 10.1638C19.7481 9.64933 19.837 9.09797 19.8082 8.54641C19.7795 7.99486 19.6337 7.45576 19.3806 6.96499C19.1276 6.47422 18.773 6.04303 18.3406 5.70013C17.9081 5.35722 17.4077 5.11046 16.8726 4.97626C16.3374 4.84206 15.7799 4.8235 15.237 4.92182C14.6942 5.02014 14.1785 5.23308 13.7242 5.54647C13.27 5.85986 12.8876 6.26652 12.6025 6.73937L11.777 8.07345L10.9515 6.73937C10.6107 6.17057 10.1273 5.70085 9.54925 5.37678C8.9712 5.0527 8.31858 4.88555 7.6561 4.89189V4.88994Z"
            />
          </svg>
        </div>

        <div class="controls__icon">
          <svg
            width="20"
            height="21"
            viewBox="0 0 20 21"
            class="fill-current"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_3_373)">
              <path
                d="M18.6798 16.167H17.0611V14.5464C17.0611 14.3315 16.9758 14.1254 16.8241 13.9734C16.6723 13.8215 16.4664 13.7361 16.2518 13.7361C16.0371 13.7361 15.8312 13.8215 15.6795 13.9734C15.5277 14.1254 15.4424 14.3315 15.4424 14.5464V16.167H13.8237C13.609 16.167 13.4032 16.2524 13.2514 16.4043C13.0996 16.5563 13.0143 16.7624 13.0143 16.9773C13.0143 17.1922 13.0996 17.3983 13.2514 17.5503C13.4032 17.7022 13.609 17.7876 13.8237 17.7876H15.4424V19.4082C15.4424 19.6231 15.5277 19.8292 15.6795 19.9812C15.8312 20.1331 16.0371 20.2185 16.2518 20.2185C16.4664 20.2185 16.6723 20.1331 16.8241 19.9812C16.9758 19.8292 17.0611 19.6231 17.0611 19.4082V17.7876H18.6798C18.8945 17.7876 19.1003 17.7022 19.2521 17.5503C19.4039 17.3983 19.4892 17.1922 19.4892 16.9773C19.4892 16.7624 19.4039 16.5563 19.2521 16.4043C19.1003 16.2524 18.8945 16.167 18.6798 16.167Z"
              />
              <path
                d="M17.0611 5.63305H14.6331C14.6331 4.34362 14.1214 3.107 13.2108 2.19523C12.3001 1.28347 11.0649 0.77124 9.77696 0.77124C8.48904 0.77124 7.25386 1.28347 6.34317 2.19523C5.43247 3.107 4.92084 4.34362 4.92084 5.63305H2.49279C1.84882 5.63305 1.23124 5.88916 0.775889 6.34505C0.32054 6.80093 0.0647278 7.41924 0.0647278 8.06395L0.0647278 16.167C0.0660129 17.2411 0.49278 18.2709 1.25142 19.0304C2.01005 19.7899 3.03862 20.2172 4.11149 20.2185H11.3957C11.6103 20.2185 11.8162 20.1331 11.968 19.9811C12.1197 19.8292 12.205 19.6231 12.205 19.4082C12.205 19.1933 12.1197 18.9872 11.968 18.8352C11.8162 18.6832 11.6103 18.5979 11.3957 18.5979H4.11149C3.46753 18.5979 2.84994 18.3418 2.39459 17.8859C1.93925 17.43 1.68343 16.8117 1.68343 16.167V8.06395C1.68343 7.84905 1.7687 7.64295 1.92049 7.49098C2.07227 7.33902 2.27813 7.25365 2.49279 7.25365H4.92084V8.87426C4.92084 9.08916 5.00611 9.29526 5.1579 9.44723C5.30968 9.59919 5.51554 9.68456 5.7302 9.68456C5.94485 9.68456 6.15071 9.59919 6.30249 9.44723C6.45428 9.29526 6.53955 9.08916 6.53955 8.87426V7.25365H13.0144V8.87426C13.0144 9.08916 13.0996 9.29526 13.2514 9.44723C13.4032 9.59919 13.6091 9.68456 13.8237 9.68456C14.0384 9.68456 14.2442 9.59919 14.396 9.44723C14.5478 9.29526 14.6331 9.08916 14.6331 8.87426V7.25365H17.0611C17.2758 7.25365 17.4816 7.33902 17.6334 7.49098C17.7852 7.64295 17.8705 7.84905 17.8705 8.06395V12.1155C17.8705 12.3304 17.9558 12.5365 18.1075 12.6884C18.2593 12.8404 18.4652 12.9258 18.6798 12.9258C18.8945 12.9258 19.1004 12.8404 19.2521 12.6884C19.4039 12.5365 19.4892 12.3304 19.4892 12.1155V8.06395C19.4892 7.41924 19.2334 6.80093 18.778 6.34505C18.3227 5.88916 17.7051 5.63305 17.0611 5.63305ZM6.53955 5.63305C6.53955 4.77343 6.88063 3.94901 7.48776 3.34117C8.0949 2.73333 8.91834 2.39184 9.77696 2.39184C10.6356 2.39184 11.459 2.73333 12.0662 3.34117C12.6733 3.94901 13.0144 4.77343 13.0144 5.63305H6.53955Z"
              />
            </g>
            <defs>
              <clipPath id="clip0_3_373">
                <rect
                  width="19.4245"
                  height="19.4472"
                  transform="translate(0.0647278 0.77124)"
                />
              </clipPath>
            </defs>
          </svg>
        </div>

        <div class="controls__icon">
          <svg
            width="31"
            height="30"
            viewBox="0 0 31 30"
            class="fill-current"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_3_379)">
              <path
                d="M9.86463 9.4371C10.6251 8.61676 11.5091 8.00014 12.4509 7.57606C15.5807 6.16679 19.3897 6.89404 21.7576 9.59879L23.3933 8.19754C23.4842 8.11969 23.63 8.19171 23.6387 8.3137L24.0455 13.8017C24.0505 13.893 23.9662 13.9653 23.88 13.9434L18.5301 12.6959C18.4082 12.6652 18.3625 12.513 18.4534 12.4351L20.0858 11.0367C18.5209 9.26489 16.1035 8.67935 13.9755 9.35986C13.171 9.61568 12.4104 10.0478 11.7561 10.6702C10.8566 11.5252 10.2928 12.6217 10.0695 13.7811C9.95173 14.3997 9.34542 14.7953 8.73261 14.6506C8.14944 14.5142 7.78531 13.9369 7.9007 13.3483C8.17247 11.9167 8.82963 10.5545 9.86463 9.4371ZM21.3205 16.4738C21.1032 17.6337 20.5361 18.733 19.6338 19.5847C18.9764 20.2099 18.213 20.6387 17.4145 20.895C15.2865 21.5755 12.8658 20.9928 11.3042 19.2182L12.9366 17.8198C13.0275 17.7419 12.979 17.5865 12.8599 17.559L7.5072 16.3082C7.4178 16.2891 7.33342 16.3614 7.34169 16.45L7.7457 21.9347C7.75718 22.0599 7.90028 22.1287 7.99115 22.0509L9.62681 20.6496C11.9915 23.3571 15.8033 24.0876 18.9335 22.6723C19.8753 22.2483 20.7565 21.6284 21.5198 20.8113C22.5576 19.6971 23.2147 18.3349 23.4865 16.9033C23.5991 16.3115 23.2378 15.7375 22.6546 15.6011C22.0446 15.4596 21.4383 15.8552 21.3205 16.4738Z"
                stroke="white"
                stroke-width="0.3"
              />
            </g>
            <defs>
              <clipPath id="clip0_3_379">
                <rect
                  width="20.9964"
                  height="20.9926"
                  transform="matrix(0.649713 0.76018 -0.759427 0.650592 16.8421 0.314209)"
                />
              </clipPath>
            </defs>
          </svg>
        </div>
        <div class="controls__icon">
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            class="fill-current"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_3_384)">
              <path
                d="M18.8992 7.69499C17.6439 5.64817 14.7885 2.21411 9.77698 2.21411C4.76547 2.21411 1.91008 5.64817 0.654773 7.69499C0.266711 8.32339 0.0611572 9.04758 0.0611572 9.78638C0.0611572 10.5252 0.266711 11.2494 0.654773 11.8778C1.91008 13.9246 4.76547 17.3586 9.77698 17.3586C14.7885 17.3586 17.6439 13.9246 18.8992 11.8778C19.2873 11.2494 19.4928 10.5252 19.4928 9.78638C19.4928 9.04758 19.2873 8.32339 18.8992 7.69499ZM17.5192 11.0294C16.4412 12.7845 14.001 15.738 9.77698 15.738C5.55297 15.738 3.11278 12.7845 2.03472 11.0294C1.80416 10.6559 1.68204 10.2255 1.68204 9.78638C1.68204 9.3473 1.80416 8.91689 2.03472 8.54338C3.11278 6.78826 5.55297 3.83471 9.77698 3.83471C14.001 3.83471 16.4412 6.78502 17.5192 8.54338C17.7498 8.91689 17.8719 9.3473 17.8719 9.78638C17.8719 10.2255 17.7498 10.6559 17.5192 11.0294Z"
              />
              <path
                d="M9.77693 5.73486C8.97655 5.73486 8.19415 5.97248 7.52867 6.41767C6.86318 6.86285 6.3445 7.49561 6.03821 8.23593C5.73192 8.97624 5.65178 9.79087 5.80792 10.5768C5.96407 11.3627 6.34948 12.0846 6.91543 12.6512C7.48138 13.2178 8.20245 13.6037 8.98744 13.76C9.77244 13.9164 10.5861 13.8361 11.3256 13.5295C12.065 13.2228 12.697 12.7035 13.1417 12.0373C13.5864 11.371 13.8237 10.5877 13.8237 9.78637C13.8224 8.71224 13.3956 7.68247 12.637 6.92294C11.8784 6.16342 10.8498 5.73615 9.77693 5.73486ZM9.77693 12.2173C9.2967 12.2173 8.82726 12.0747 8.42797 11.8076C8.02868 11.5405 7.71747 11.1608 7.53369 10.7166C7.34992 10.2724 7.30184 9.78367 7.39552 9.31213C7.48921 8.84058 7.72046 8.40743 8.06003 8.06746C8.3996 7.72749 8.83224 7.49597 9.30324 7.40218C9.77423 7.30838 10.2624 7.35652 10.7061 7.54051C11.1498 7.7245 11.529 8.03607 11.7958 8.43583C12.0626 8.83559 12.205 9.30558 12.205 9.78637C12.205 10.4311 11.9492 11.0494 11.4938 11.5053C11.0385 11.9612 10.4209 12.2173 9.77693 12.2173Z"
              />
            </g>
            <defs>
              <clipPath id="clip0_3_384">
                <rect
                  width="19.4245"
                  height="19.4472"
                  transform="translate(0.0647278 0.0627441)"
                />
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>
    </div>
    <div class="">
      <p class="text-span-gray text-sm uppercase">
        {{ category }}
      </p>
      <p
        class="text-dark-gray font-rubik text-base sm:text-xl mb-2 max-w-[140px] sm:max-w-none"
      >
        {{ goodName }}
      </p>
      <div class="text-lg sm:flex items-center">
        <PriceTag
          :currency="currency"
          :currentPrice="currentPrice"
          :prevPrice="prevPrice"
        />
        <span v-show="rating" class="sm:ml-auto flex">
          <StarRating :rating="rating" />
        </span>
      </div>
    </div>
  </div>
</template>

<script>
import Picture from '@/components/Picture';
import StarRating from '@/components/StarRating';
import ProductLabel from '@/components/ProductLabel';
import PriceTag from '@/components/PriceTag';

export default {
  name: 'Product',
  components: {
    Picture,
    StarRating,
    ProductLabel,
    PriceTag,
  },
  props: {
    src: {
      type: String,
      required: true,
    },
    category: {
      type: String,
      required: true,
    },
    goodName: {
      type: String,
      required: true,
    },
    currentPrice: {
      type: String,
      required: true,
    },
    prevPrice: {
      type: String,
      required: true,
    },
    currency: {
      type: String,
      required: true,
    },
    rating: {
      type: Number,
      default: 0,
    },
    label: {
      type: String,
      required: true,
    },
  },
  data() {
    return {
      isHovered: false,
    };
  },
};
</script>

<style scoped lang="scss">
.controls {
  &__icon {
    background-color: #fff;
    color: $span-gray;
    border-radius: 9999px;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 1.8rem;
    width: 1.8rem;
    cursor: pointer;
    transition: all 0.15s ease-in-out;

    @include media-sm {
      height: 2.5rem;
      width: 2.5rem;
    }

    &:hover {
      background-color: $dark-gray;
      color: white;
    }

    &:active {
      transform: scale(0.9);
      will-change: transform;
    }
  }
}
</style>
